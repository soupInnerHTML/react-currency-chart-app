(this["webpackJsonpreact-currency-chart-app"]=this["webpackJsonpreact-currency-chart-app"]||[]).push([[0],{189:function(e,t,r){},190:function(e,t,r){},342:function(e,t,r){"use strict";r.r(t);var a=r(26),c=r(0),n=r.n(c),s=r(56),i=r.n(s),o=(r(189),r(190),r(20)),u=r(44),b=r(74),d=r(8),l="price";function m(e){return e<10?"0"+e:e}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Date(e);return[r.getHours(),r.getMinutes(),r.getSeconds()].filter((function(e,r){return!t||2!==r})).map((function(e){return m(e)})).join(":")},y=r(47),p=function(e){return Number(null===e||void 0===e?void 0:e.toFixed(3))},h=d.d.enumeration(Object.keys(y)),O=d.d.model({name:h,streamValue:d.d.optional(d.d.number,0)}),f=d.d.model("Streamer",{streamBy:d.d.optional(d.d.string,l),subscribedCurrency:d.d.optional(O,{name:"BTC"}),subscribedCurrencyBase:d.d.optional(O,{name:"USD"}),chartType:d.d.optional(d.d.enumeration(["line","bar"]),"line")}).volatile((function(e){return{ccStreamer:new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=3c97b9a112b2ea40c0bc78473365c5855379e17b7d8d7b55607a6f857dbad842"),channel:"5~CCCAGG"}})).views((function(e){return{get history(){return Object(d.b)(e).history}}})).actions((function(e){return{afterCreate:function(){e.ccStreamer.onopen=function(){var t={action:"SubAdd",subs:["".concat(e.channel,"~").concat(e.subscribedCurrency.name,"~").concat(e.subscribedCurrencyBase.name)]};e.ccStreamer.send(JSON.stringify(t))},e.ccStreamer.onmessage=this.onStreamMessage,e.ccStreamer.onerror=function(e){return console.log(e)}},onStreamMessage:function(t){var r=JSON.parse(t.data),a=p(r[e.streamBy.toUpperCase()]);if(a){var c={time:j(),cName:r.FROMSYMBOL,cBase:r.TOSYMBOL,streamValue:a,streamBy:e.streamBy};e.history.setGlobal(c),r.TOSYMBOL===e.subscribedCurrencyBase.name&&r.FROMSYMBOL===e.subscribedCurrency.name&&(e.subscribedCurrency.streamValue=a,e.history.setSubs(c))}},streamByCurrencies:function(t,r){e.subscribedCurrencyBase.name=t,e.subscribedCurrency.name=r,e.history.switchHistory((function(a){return a.cBase===t&&a.cName===r&&a.streamBy===e.streamBy}));var a={action:"SubAdd",subs:["".concat(e.channel,"~").concat(r,"~").concat(t)]};e.ccStreamer.send(JSON.stringify(a))},streamBySimpleCurrency:function(t){this.streamByCurrencies(t,e.subscribedCurrency.name)},streamByCryptoCurrency:function(t){this.streamByCurrencies(e.subscribedCurrencyBase.name,t)},setStreamBy:function(t){e.streamBy=t,e.history.switchHistory((function(e){return e.streamBy===t&&e.streamValue}))},updateSubscribedCurrencyByLast:function(t){e.subscribedCurrency.streamValue=t.slice(-1)[0].streamValue},setChartType:function(t){e.chartType=t}}})),C=r(31),x=r.n(C),v=r(86),g=r.n(v),S=d.d.enumeration(Object.keys(y)),B=d.d.model({time:d.d.string,cName:S,cBase:S,streamValue:d.d.number,streamBy:d.d.enumeration([l,"lastVolumeTo"])}),w=d.d.model("History",{historyOfPriceChange:d.d.array(B),historyOfSubsPriceChange:d.d.array(B)}).volatile((function(e){return{api:g.a.create({baseURL:"https://min-api.cryptocompare.com/data/v2",timeout:5e3,headers:{Authorization:"Apikey 3c97b9a112b2ea40c0bc78473365c5855379e17b7d8d7b55607a6f857dbad842",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}})}})).views((function(e){return{get streamer(){return Object(d.b)(e).streamer},get subscribedCurrency(){return this.streamer.subscribedCurrency.name},get subscribedCurrencyBase(){return this.streamer.subscribedCurrencyBase.name}}})).actions((function(e){return{afterCreate:function(){this.getHistoryData()},getHistoryData:Object(d.a)(x.a.mark((function t(){var r,a,c,n,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.streamer.streamBy!==l){t.next=10;break}return t.next=3,e.api("/histominute?fsym=".concat(e.subscribedCurrency,"&tsym=").concat(e.subscribedCurrencyBase,"&limit=50"));case 3:c=t.sent,n=c.data,s=n.Data.Data,i=s.map((function(t){return{time:j(new Date(1e3*t.time),!0),cName:e.subscribedCurrency,cBase:e.subscribedCurrencyBase,streamValue:p(t.open),streamBy:l}})).slice(0,-1),(r=e).setGlobal.apply(r,Object(u.a)(i)),(a=e).setSubs.apply(a,Object(u.a)(i)),e.streamer.updateSubscribedCurrencyByLast(i);case 10:case"end":return t.stop()}}),t)}))),switchHistory:Object(d.a)(x.a.mark((function t(r){var a,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.streamer.subscribedCurrency.streamValue=0,a=Object(d.c)(e.historyOfPriceChange),(c=a.filter(r)).length?(e.historyOfSubsPriceChange=c,e.streamer.updateSubscribedCurrencyByLast(c)):(e.historyOfSubsPriceChange.clear(),e.getHistoryData());case 4:case"end":return t.stop()}}),t)}))),setGlobal:function(){var t;(t=e.historyOfPriceChange).push.apply(t,arguments)},setSubs:function(){var t;(t=e.historyOfSubsPriceChange).push.apply(t,arguments)}}})),N=r(3),D=d.d.model("NewsItem",{id:d.d.string,published:d.d.number,guid:d.d.string,imageurl:d.d.string,title:d.d.string,url:d.d.string,source:d.d.string,body:d.d.string,tags:d.d.string,categories:d.d.string,upvotes:d.d.string,downvotes:d.d.string,lang:d.d.string}),k=d.d.model("News",{newsData:d.d.optional(d.d.array(D),[])}).views((function(e){return{get root(){return Object(d.b)(e)},get subscribedCurrency(){return this.root.streamer.subscribedCurrency.name}}})).actions((function(e){return{fetchData:Object(d.a)(x.a.mark((function t(){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.newsData.clear(),t.next=3,g.a.get("https://min-api.cryptocompare.com/data/v2/news/?categories="+e.subscribedCurrency);case 3:r=t.sent,c=r.data.Data,e.newsData=c.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{published:e.published_on})}));case 6:case"end":return t.stop()}}),t)}))),afterCreate:function(){var t=this;this.fetchData(),Object(N.A)((function(){return e.subscribedCurrency}),(function(){t.fetchData()}))}}})),A=d.d.model("ChartParams",{activeCryptoSelect:-1}).actions((function(e){return{setActiveCryptoSelect:function(t){e.activeCryptoSelect=t}}})),T=d.d.model("Store",{streamer:d.d.optional(f,{}),history:d.d.optional(w,{}),news:d.d.optional(k,{}),chartParams:d.d.optional(A,{})}).create(),M=Object.keys(Object(a.a)({},T)),P=function(e){return b.b.apply(void 0,Object(u.a)(M))(Object(b.c)(e))},U=r(179),L=function(e){return y[e]||y.DEFAULT},V=r(9),_=r.n(V),E=r(161),F=r.n(E),H=r(2),R=P((function(e){var t=e.data,r=e.cb,a=e.isActive,n=e.streamer,s=n.subscribedCurrency,i=n.subscribedCurrencyBase,o=e.chartParams,u=o.setActiveCryptoSelect,b=o.activeCryptoSelect,d=e.id,l=s.name,m=i.name,j=Object(c.useMemo)((function(){return(null===t||void 0===t?void 0:t.length)?F()(t.filter((function(e){return e!==l&&e!==m})),3):[]}),[l,m]);function y(e){return function(){b!==d?u(d):r(e)}}return j.length?Object(H.jsxs)("div",{className:_()("currency-list",{active:a}),style:{zIndex:b===d?1e4:1e3-d},children:[Object(H.jsx)("div",{className:"currency-list-before"}),j.map((function(e){return Object(H.jsx)("div",{className:"currency-list-inner",children:e.map((function(e,t){return Object(H.jsx)(I,{name:e,onClick:y(e)},t)}))})}))]}):Object(H.jsx)(H.Fragment,{})})),I=P((function(e){var t=e.name,r=e.cb,n=e.data,s=e.id,i=e.chartParams,u=i.setActiveCryptoSelect,b=i.activeCryptoSelect,d=Object(U.a)(e,["name","cb","data","id","chartParams"]),l=Object(c.useMemo)((function(){return L(t)}),[t]),m=Object(c.useState)(!1),j=Object(o.a)(m,2),y=j[0],p=j[1],h=Object(c.useCallback)((function(){u&&-1===b&&u(s)}),[u]),O=Object(c.useCallback)((function(){u&&u(-1)}),[u]);return Object(H.jsxs)("div",Object(a.a)(Object(a.a)({className:"currency",onClick:function(){p(!0),h()}},d),{},{children:[Object(H.jsx)("div",{className:_()("dot",{untouched:!y&&s}),style:{background:l,boxShadow:"0 0 7px "+l}}),Object(H.jsx)("p",{children:t}),Object(H.jsx)(R,{cb:r,data:n,setActive:h,setInactive:O,id:s,isActive:b===s})]}))})),J=P((function(e){var t=e.streamer.subscribedCurrency.streamValue,r=Object(c.useState)(0),a=Object(o.a)(r,2),n=a[0],s=a[1],i=Object(c.useState)(""),u=Object(o.a)(i,2),b=u[0],d=u[1];return Object(c.useEffect)((function(){d(t>=n?"green":"red"),s(t)}),[t]),Object(H.jsx)(H.Fragment,{children:!!t&&Object(H.jsxs)("p",{className:"price-lighten",children:["current price:\xa0",Object(H.jsx)("span",{onAnimationEnd:function(){return d("")},className:_()("price-lighten",b),children:t})]})})})),G=P((function(e){var t=e.streamer,r=t.chartType,a=t.setChartType;return Object(H.jsxs)("div",{className:"switch",children:[Object(H.jsx)("div",{onClick:function(){a("line")},className:_()({active:"line"===r}),children:"Line"}),Object(H.jsx)("div",{onClick:function(){a("bar")},className:_()({active:"bar"===r}),children:"Bar"})]})})),Y=P((function(e){var t=e.streamer,r=t.subscribedCurrency,a=t.streamBySimpleCurrency,n=t.streamByCryptoCurrency,s=t.subscribedCurrencyBase,i=Object(c.useState)(-1),u=Object(o.a)(i,2),b=u[0],d=u[1];return Object(H.jsxs)("div",{className:"currency main",children:[Object(H.jsx)(I,{activeSelectId:b,setActiveSelectId:d,id:1,name:r.name,data:["BTC","ETH","XRP","LTC","USDT","BNB","BUSD","EOS","ADA"],cb:n}),Object(H.jsx)(I,{activeSelectId:b,setActiveSelectId:d,id:2,name:s.name,data:["USD","EUR","JPY","RUB"],cb:a}),Object(H.jsx)(G,{}),Object(H.jsx)(J,{})]})})),z=r(344),K=r(348),W=r(91),X=r(92),q=r(77),Q=r(174),Z=r(349),$=r(180),ee=r(176),te=r.p+"static/media/logo.6ce24c58.svg",re=function(){return Object(H.jsxs)("div",{className:"nullChart",children:[Object(H.jsx)("span",{children:"The data will appear here"}),Object(H.jsx)("img",{src:te,className:"App-logo",alt:"logo"})]})},ae=P((function(e){var t=e.streamer,r=t.subscribedCurrency,a=t.subscribedCurrencyBase,c=t.streamBy,n=e.history.historyOfSubsPriceChange,s={fontSize:11},i=L(r.name),o=L(a.name),u=Object(d.c)(n),b=u.length<2;return Object(H.jsxs)(H.Fragment,{children:[b&&Object(H.jsx)(re,{}),Object(H.jsxs)(z.a,{width:window.innerWidth-100,height:400,data:b?[]:u,children:[Object(H.jsx)("defs",{children:Object(H.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(H.jsx)("stop",{offset:"5%",stopColor:i,stopOpacity:.8}),Object(H.jsx)("stop",{offset:"95%",stopColor:o,stopOpacity:.1})]})}),Object(H.jsx)(K.a,{strokeDasharray:"3"}),Object(H.jsx)(W.a,{dataKey:"time",tick:s}),Object(H.jsx)(X.a,{orientation:"right",allowDataOverflow:!0,domain:["dataMin","dataMax"],tick:s}),Object(H.jsx)(q.a,{}),Object(H.jsx)(Q.a,{type:"monotone",name:c,dataKey:"streamValue",stroke:i,fillOpacity:1,fill:"url(#colorUv)"})]})]})})),ce=P((function(e){var t=e.streamer,r=t.subscribedCurrency,a=t.subscribedCurrencyBase,c=t.streamBy,n=e.history.historyOfSubsPriceChange,s={fontSize:11},i=L(r.name),o=L(a.name),b=Object(d.c)(n),l=b.length<2;Math.min.apply(Math,Object(u.a)(b.map((function(e){return e.streamValue})))),Math.max.apply(Math,Object(u.a)(b.map((function(e){return e.streamValue}))));return Object(H.jsxs)(H.Fragment,{children:[l&&Object(H.jsx)(re,{}),Object(H.jsxs)(Z.a,{width:window.innerWidth-100,height:400,data:l?[]:b,children:[Object(H.jsx)("defs",{children:Object(H.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(H.jsx)("stop",{offset:"5%",stopColor:i,stopOpacity:.8}),Object(H.jsx)("stop",{offset:"95%",stopColor:o,stopOpacity:.1})]})}),Object(H.jsx)(K.a,{strokeDasharray:"3"}),Object(H.jsx)(W.a,{dataKey:"time",tick:s}),Object(H.jsx)(X.a,{orientation:"right",allowDataOverflow:!0,domain:["dataMin","dataMax"],tick:s}),Object(H.jsx)(q.a,{}),Object(H.jsx)($.a,{type:"monotone",name:c,dataKey:"streamValue",children:b.map((function(e,t){var r;return Object(H.jsx)(ee.a,{fill:(null===(r=b[t-1])||void 0===r?void 0:r.streamValue)>e.streamValue?"red":"green"})}))})]})]})})),ne=P((function(e){var t=e.streamer,r=t.subscribedCurrency,a=t.subscribedCurrencyBase,c="https://www.binance.com/en/buy-sell-crypto?fiat=".concat(a.name,"&crypto=").concat(r.name);return Object(H.jsxs)("div",{className:"buy-buttons",children:[Object(H.jsx)("a",{target:"_blank",className:"buy-button",href:c,children:"BUY"}),Object(H.jsx)("a",{target:"_blank",className:"buy-button",href:c+"&type=SELL",children:"SELL"})]})})),se=r(116),ie=r.n(se),oe=r(177),ue=r.n(oe);ie.a.extend(ue.a);var be=P((function(e){var t=e.title,r=e.imageurl,a=e.body,c=e.url,n=e.categories,s=e.published,i=e.streamer.subscribedCurrency;return Object(H.jsxs)("a",{href:c,target:"_blank",className:"news-item",children:[Object(H.jsx)("img",{className:"news-item__image",src:r}),Object(H.jsxs)("div",{children:[Object(H.jsxs)("p",{className:"news-item__title",children:[t," ",Object(H.jsx)("span",{className:"news-item__date",children:ie()(1e3*s).fromNow()})]}),Object(H.jsx)("p",{className:"news-item__body",children:a}),Object(H.jsxs)("p",{className:"news-item__body",children:["Categories: ",n.split("|").map((function(e){return Object(H.jsx)("span",{className:"news-item__tag",style:i.name===e?{color:L(i.name),borderColor:L(i.name)}:{},children:e})}))]})]})]})})),de=P((function(e){var t=e.news.newsData;return Object(H.jsx)("div",{className:"news",children:t.map((function(e){return Object(H.jsx)(be,Object(a.a)({},e))}))})})),le=P((function(e){var t=e.streamer.chartType;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Y,{}),"line"===t?Object(H.jsx)(ae,{}):Object(H.jsx)(ce,{}),Object(H.jsx)(ne,{}),Object(H.jsx)(de,{})]})})),me=P((function(e){var t=e.chartParams,r=t.setActiveCryptoSelect,a=t.activeCryptoSelect;return Object(H.jsx)("div",{className:"App",children:Object(H.jsx)("div",{className:"App-body",onClick:function(){return-1!==a&&r(-1)},children:Object(H.jsx)(le,{})})})}));i.a.render(Object(H.jsx)(n.a.StrictMode,{children:Object(H.jsx)(b.a,Object(a.a)(Object(a.a)({},T),{},{children:Object(H.jsx)(me,{})}))}),document.getElementById("root"))},47:function(e){e.exports=JSON.parse('{"BTC":"#ff7300","USD":"#00ff00","EUR":"#294b92","RUB":"#fff","LTC":"#647AE6","ETH":"#000","JPY":"#bd0029","USDT":"#16A17D","XRP":"#9349ff","BNB":"#F0B80C","BUSD":"#EFB90B","EOS":"#000","ADA":"#0133AD","DEFAULT":"#000"}')}},[[342,1,2]]]);
//# sourceMappingURL=main.79e5b4dd.chunk.js.map