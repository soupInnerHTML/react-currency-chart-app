(this["webpackJsonpreact-currency-chart-app"]=this["webpackJsonpreact-currency-chart-app"]||[]).push([[0],{181:function(e,t,r){},182:function(e,t,r){},336:function(e,t,r){"use strict";r.r(t);var n=r(42),c=r(0),a=r.n(c),s=r(53),i=r.n(s),u=(r(181),r(182),r(74)),o=r(72),b=r(14),d="price",m="lastVolumeTo";function y(e){return e<10?"0"+e:e}var l,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Date(e);return[r.getHours(),r.getMinutes(),r.getSeconds()].filter((function(e,r){return!t||2!==r})).map((function(e){return y(e)})).join(":")},f=r(46),O=function(e){return Number(null===e||void 0===e?void 0:e.toFixed(3))},h=b.d.enumeration(Object.keys(f)),p=b.d.model({name:h,streamValue:b.d.optional(b.d.number,0)}),C=b.d.model("Streamer",{streamBy:b.d.optional(b.d.string,d),subscribedCurrency:b.d.optional(p,{name:"BTC"}),subscribedCurrencyBase:b.d.optional(p,{name:"USD"})}).volatile((function(e){return{ccStreamer:new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=3c97b9a112b2ea40c0bc78473365c5855379e17b7d8d7b55607a6f857dbad842"),channel:"5~CCCAGG"}})).views((function(e){return{get history(){return Object(b.b)(e).history},get historyOfPriceChange(){return this.history.historyOfPriceChange},get historyOfSubsPriceChange(){return this.history.historyOfSubsPriceChange}}})).actions((function(e){return{afterCreate:function(){e.ccStreamer.onopen=function(){var t={action:"SubAdd",subs:["".concat(e.channel,"~").concat(e.subscribedCurrency.name,"~").concat(e.subscribedCurrencyBase.name)]};e.ccStreamer.send(JSON.stringify(t))},e.ccStreamer.onmessage=this.onStreamMessage,e.ccStreamer.onerror=function(e){return console.log(e)}},onStreamMessage:function(t){var r=JSON.parse(t.data),n=O(r[e.streamBy.toUpperCase()]);if(n){var c={time:j(),cName:r.FROMSYMBOL,cBase:r.TOSYMBOL,streamValue:n,streamBy:e.streamBy};e.history.setGlobal(c),r.TOSYMBOL===e.subscribedCurrencyBase.name&&r.FROMSYMBOL===e.subscribedCurrency.name&&(e.subscribedCurrency.streamValue=n,e.history.setSubs(c))}},streamByCurrencies:function(t,r){e.history.switchHistory((function(n){return n.cBase===t&&n.cName===r&&n.streamBy===e.streamBy})),e.subscribedCurrencyBase.name=t,e.subscribedCurrency.name=r;var n={action:"SubAdd",subs:["".concat(e.channel,"~").concat(r,"~").concat(t)]};e.ccStreamer.send(JSON.stringify(n))},streamBySimpleCurrency:function(t){this.streamByCurrencies(t,e.subscribedCurrency.name)},streamByCryptoCurrency:function(t){this.streamByCurrencies(e.subscribedCurrencyBase.name,t)},setStreamBy:function(t){e.streamBy=t,e.history.switchHistory((function(e){return e.streamBy===t&&e.streamValue}))},updateSubscribedCurrencyByLast:function(t){e.subscribedCurrency.streamValue=t.slice(-1)[0].streamValue}}})),g=r(43),x=r.n(g),v=r(153),S=r.n(v),B=b.d.enumeration(Object.keys(f)),w=b.d.model({time:b.d.string,cName:B,cBase:B,streamValue:b.d.number,streamBy:b.d.enumeration([d,m])}),N=b.d.model("History",{historyOfPriceChange:b.d.array(w),historyOfSubsPriceChange:b.d.array(w)}).volatile((function(e){return{api:S.a.create({baseURL:"https://min-api.cryptocompare.com/data/v2",timeout:5e3,headers:{Authorization:"Apikey 3c97b9a112b2ea40c0bc78473365c5855379e17b7d8d7b55607a6f857dbad842",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}})}})).views((function(e){return{get streamer(){return Object(b.b)(e).streamer},get subscribedCurrency(){return this.streamer.subscribedCurrency.name},get subscribedCurrencyBase(){return this.streamer.subscribedCurrencyBase.name}}})).actions((function(e){return{afterCreate:function(){this.getHistoryData()},getHistoryData:Object(b.a)(x.a.mark((function t(){var r,n,c,a,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.streamer.streamBy!==m){t.next=10;break}return t.next=3,e.api("/histominute?fsym=".concat(e.subscribedCurrency,"&tsym=").concat(e.subscribedCurrencyBase,"&limit=50"));case 3:c=t.sent,a=c.data,s=a.Data.Data,i=s.map((function(t){return{time:j(new Date(1e3*t.time),!0),cName:e.subscribedCurrency,cBase:e.subscribedCurrencyBase,streamValue:O(t.volumeto/1e3),streamBy:m}})).slice(0,-1),(r=e).setGlobal.apply(r,Object(u.a)(i)),(n=e).setSubs.apply(n,Object(u.a)(i)),e.streamer.updateSubscribedCurrencyByLast(i);case 10:case"end":return t.stop()}}),t)}))),switchHistory:Object(b.a)(x.a.mark((function t(r){var n,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.streamer.subscribedCurrency.streamValue=0,n=Object(b.c)(e.historyOfPriceChange),(c=n.filter(r)).length?(e.historyOfSubsPriceChange=c,e.streamer.updateSubscribedCurrencyByLast(c)):(e.historyOfSubsPriceChange.clear(),e.getHistoryData());case 4:case"end":return t.stop()}}),t)}))),setGlobal:function(){var t;(t=e.historyOfPriceChange).push.apply(t,arguments)},setSubs:function(){var t;(t=e.historyOfSubsPriceChange).push.apply(t,arguments)}}})),k=b.d.model("Store",{streamer:b.d.optional(C,{}),history:b.d.optional(N,{})}).create(),D=Object.keys(Object(n.a)({},k)),P=function(e){return o.b.apply(void 0,Object(u.a)(D))(Object(o.c)(e))},A=r(20),M=r(171),T=function(e){return f[e]||f.DEFAULT},L=r(8),U=r.n(L),V=r(3),E=P((function(e){var t=e.data,r=e.cb,n=e.isActive,a=e.streamer,s=a.subscribedCurrency,i=a.subscribedCurrencyBase,u=s.name,o=i.name,b=Object(c.useMemo)((function(){return(null===t||void 0===t?void 0:t.length)?t.filter((function(e){return e!==u&&e!==o})):[]}),[u,o]);return b.length?Object(V.jsxs)("div",{className:U()("currency-list",{active:n}),children:[Object(V.jsx)("div",{className:"currency-list-before"}),b.map((function(e,t){return Object(V.jsx)(H,{name:e,onClick:function(){return r(e)}},t)}))]}):Object(V.jsx)(V.Fragment,{})})),H=(l=function(e){var t=e.name,r=e.cb,a=e.data,s=Object(M.a)(e,["name","cb","data"]),i=Object(c.useState)(!1),u=Object(A.a)(i,2),o=u[0],b=u[1],d=Object(c.useMemo)((function(){return T(t)}),[t]);return Object(V.jsxs)("div",Object(n.a)(Object(n.a)({className:"currency",onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},s),{},{children:[Object(V.jsx)("div",{className:"dot",style:{background:d,boxShadow:"0 0 7px "+d}}),Object(V.jsx)("p",{children:t}),Object(V.jsx)(E,{cb:r,data:a,isActive:o})]}))},a.a.memo(l,(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}))),J=P((function(e){var t=e.streamer.subscribedCurrency.streamValue,r=Object(c.useState)(0),n=Object(A.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(""),u=Object(A.a)(i,2),o=u[0],b=u[1];return Object(c.useEffect)((function(){b(t>=a?"green":"red"),s(t)}),[t]),Object(V.jsx)(V.Fragment,{children:!!t&&Object(V.jsxs)("p",{onAnimationEnd:function(){return b("")},className:U()("price-lighten",o),children:["curr: ",t]})})})),F=P((function(e){var t=e.streamer,r=t.streamBy,n=t.setStreamBy;return Object(V.jsxs)("div",{className:"switch",children:[Object(V.jsx)("div",{onClick:function(){n(m)},className:U()({active:r===m}),children:"VOL"}),Object(V.jsx)("div",{onClick:function(){n(d)},className:U()({active:r===d}),children:"PRICE"})]})})),R=P((function(e){var t=e.streamer,r=t.subscribedCurrency,n=t.streamBySimpleCurrency,c=t.streamByCryptoCurrency,a=t.subscribedCurrencyBase;return Object(V.jsxs)("div",{className:"currency main",children:[Object(V.jsx)(J,{}),Object(V.jsx)(F,{}),Object(V.jsx)(H,{name:r.name,data:["BTC","ETH","XRP","LTC"],cb:c}),Object(V.jsx)(H,{name:a.name,data:["USD","EUR","JPY","USDT"],cb:n})]})})),G=r(338),Y=r(342),z=r(168),I=r(169),K=r(76),W=r(172),X=r.p+"static/media/logo.6ce24c58.svg",_=function(){return Object(V.jsxs)("div",{className:"nullChart",children:[Object(V.jsx)("span",{children:"The data will appear here"}),Object(V.jsx)("img",{src:X,className:"App-logo",alt:"logo"})]})},q=P((function(e){var t=e.streamer,r=t.subscribedCurrency,n=t.subscribedCurrencyBase,c=t.streamBy,a=e.history.historyOfSubsPriceChange,s={fontSize:11},i=T(r.name),u=T(n.name),o=Object(b.c)(a),d=o.length<2;return Object(V.jsxs)(V.Fragment,{children:[d&&Object(V.jsx)(_,{}),Object(V.jsxs)(G.a,{width:window.innerWidth-100,height:400,data:d?[]:o,children:[Object(V.jsx)("defs",{children:Object(V.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(V.jsx)("stop",{offset:"5%",stopColor:i,stopOpacity:.8}),Object(V.jsx)("stop",{offset:"95%",stopColor:u,stopOpacity:.1})]})}),Object(V.jsx)(Y.a,{strokeDasharray:"3"}),Object(V.jsx)(z.a,{dataKey:"time",tick:s}),Object(V.jsx)(I.a,{domain:["dataMin","dataMax"],tick:s}),Object(V.jsx)(K.a,{}),Object(V.jsx)(W.a,{type:"monotone",name:c,dataKey:"streamValue",stroke:i,fillOpacity:1,fill:"url(#colorUv)"})]})]})})),Q=function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(R,{}),Object(V.jsx)(q,{})]})},Z=function(){return Object(V.jsx)("div",{className:"App",children:Object(V.jsx)("div",{className:"App-body",children:Object(V.jsx)(Q,{})})})};i.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(o.a,Object(n.a)(Object(n.a)({},k),{},{children:Object(V.jsx)(Z,{})}))}),document.getElementById("root"))},46:function(e){e.exports=JSON.parse('{"BTC":"#ff7300","USD":"#00ff00","EUR":"#294b92","LTC":"#647AE6","ETH":"#000","JPY":"#bd0029","USDT":"#16A17D","XRP":"#9349ff","DEFAULT":"#000"}')}},[[336,1,2]]]);
//# sourceMappingURL=main.7f2078c9.chunk.js.map