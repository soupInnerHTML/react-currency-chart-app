(this["webpackJsonpreact-currency-chart-app"]=this["webpackJsonpreact-currency-chart-app"]||[]).push([[0],{174:function(e,t,r){},175:function(e,t,r){},312:function(e,t,r){"use strict";r.r(t);var c=r(42),n=r(0),s=r.n(n),a=r(51),i=r.n(a),o=(r(174),r(175),r(87)),u=r(72),b=r(17);function m(e){return e<10?"0"+e:e}var d,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return[t.getHours(),t.getMinutes(),t.getSeconds()].map((function(e){return m(e)})).join(":")},l=r(66),O="price",y="lastVolumeTo",h=b.b.enumeration(Object.keys(l)),f=b.b.model({time:b.b.string,cName:h,cBase:h,streamBy:b.b.number,streamBase:b.b.enumeration([O,y])}),p=b.b.model({name:h,streamValue:b.b.optional(b.b.number,0)}),C=b.b.model("Streamer",{streamBy:b.b.optional(b.b.string,O),subscribedCurrency:b.b.optional(p,{name:"BTC"}),subscribedCurrencyBase:b.b.optional(p,{name:"USD"}),historyOfPriceChange:b.b.array(f),historyOfSubsPriceChange:b.b.array(f)}).volatile((function(e){return{ccStreamer:new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=3c97b9a112b2ea40c0bc78473365c5855379e17b7d8d7b55607a6f857dbad842"),channel:"5~CCCAGG"}})).actions((function(e){return{afterCreate:function(){e.ccStreamer.onopen=function(){var t={action:"SubAdd",subs:["".concat(e.channel,"~").concat(e.subscribedCurrency.name,"~").concat(e.subscribedCurrencyBase.name)]};e.ccStreamer.send(JSON.stringify(t))},e.ccStreamer.onmessage=this.onStreamMessage,e.ccStreamer.onerror=function(e){return console.log(e)}},onStreamMessage:function(t){var r,c=JSON.parse(t.data),n=Number(null===(r=c[e.streamBy.toUpperCase()])||void 0===r?void 0:r.toFixed(3));n&&(e.historyOfPriceChange.push({cName:c.FROMSYMBOL,cBase:c.TOSYMBOL,time:j(),streamBy:n,streamBase:e.streamBy}),c.TOSYMBOL===e.subscribedCurrencyBase.name&&c.FROMSYMBOL===e.subscribedCurrency.name&&(e.subscribedCurrency.streamValue=n,e.historyOfSubsPriceChange.push({time:j(),cName:c.FROMSYMBOL,cBase:c.TOSYMBOL,streamBy:n,streamBase:e.streamBy})),e.historyOfSubsPriceChange.length>20&&e.historyOfSubsPriceChange.splice(0,15),e.historyOfPriceChange.length>20&&e.historyOfPriceChange.splice(0,15))},switchHistory:function(t){e.historyOfSubsPriceChange.clear(),e.subscribedCurrency.streamValue=0;var r,c=Object(b.a)(e.historyOfPriceChange).filter(t);c.length&&((r=e.historyOfSubsPriceChange).push.apply(r,Object(o.a)(c)),e.subscribedCurrency.streamValue=c.slice(-1)[0].streamBy)},streamByCurrencies:function(t,r){this.switchHistory((function(e){return e.cBase===t&&e.cName===r})),e.subscribedCurrencyBase.name=t,e.subscribedCurrency.name=r;var c={action:"SubAdd",subs:["".concat(e.channel,"~").concat(r,"~").concat(t)]};e.ccStreamer.send(JSON.stringify(c))},streamBySimpleCurrency:function(t){this.streamByCurrencies(t,e.subscribedCurrency.name)},streamByCryptoCurrency:function(t){this.streamByCurrencies(e.subscribedCurrencyBase.name,t)},setStreamBy:function(t){this.switchHistory((function(e){return e.streamBase===t&&e.streamBy})),e.streamBy=t}}})),x=b.b.model("App",{isReady:!1,isDisconnect:!1,isDisconnectHappened:!1}).actions((function(e){return{ready:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.isReady=t},disconnect:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.isDisconnect=t,e.isDisconnectHappened=!0}}})),g=b.b.model("Store",{streamer:b.b.optional(C,{}),app:b.b.optional(x,{})}).create(),S=Object.keys(Object(c.a)({},g)),B=function(e){return u.b.apply(void 0,Object(o.a)(S))(Object(u.c)(e))},v=r(20),N=r(164),M=function(e){return l[e]||l.DEFAULT},P=r(8),T=r.n(P),w=r(3),D=B((function(e){var t=e.data,r=e.cb,c=e.isActive,s=e.streamer,a=s.subscribedCurrency,i=s.subscribedCurrencyBase,o=a.name,u=i.name,b=Object(n.useMemo)((function(){return(null===t||void 0===t?void 0:t.length)?t.filter((function(e){return e!==o&&e!==u})):[]}),[o,u]);return b.length?Object(w.jsxs)("div",{className:T()("currency-list",{active:c}),children:[Object(w.jsx)("div",{className:"currency-list-before"}),b.map((function(e,t){return Object(w.jsx)(k,{name:e,onClick:function(){return r(e)}},t)}))]}):Object(w.jsx)(w.Fragment,{})})),k=(d=function(e){var t=e.name,r=e.cb,s=e.data,a=Object(N.a)(e,["name","cb","data"]),i=Object(n.useState)(!1),o=Object(v.a)(i,2),u=o[0],b=o[1],m=Object(n.useMemo)((function(){return M(t)}),[t]);return Object(w.jsxs)("div",Object(c.a)(Object(c.a)({className:"currency",onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},a),{},{children:[Object(w.jsx)("div",{className:"dot",style:{background:m,boxShadow:"0 0 7px "+m}}),Object(w.jsx)("p",{children:t}),Object(w.jsx)(D,{cb:r,data:s,isActive:u})]}))},s.a.memo(d,(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}))),A=B((function(e){var t=e.streamer.subscribedCurrency.streamValue,r=Object(n.useState)(0),c=Object(v.a)(r,2),s=c[0],a=c[1],i=Object(n.useState)(""),o=Object(v.a)(i,2),u=o[0],b=o[1];return Object(n.useEffect)((function(){b(t>=s?"green":"red"),a(t)}),[t]),Object(w.jsx)(w.Fragment,{children:!!t&&Object(w.jsxs)("p",{onAnimationEnd:function(){return b("")},className:T()("price-lighten",u),children:["curr: ",t]})})})),E=B((function(e){var t=e.streamer,r=t.streamBy,c=t.setStreamBy;return Object(w.jsxs)("div",{className:"switch",children:[Object(w.jsx)("div",{onClick:function(){c(y)},className:T()({active:r===y}),children:"VOL"}),Object(w.jsx)("div",{onClick:function(){c(O)},className:T()({active:r===O}),children:"PRICE"})]})})),L=B((function(e){var t=e.streamer,r=t.subscribedCurrency,c=t.streamBySimpleCurrency,n=t.streamByCryptoCurrency,s=t.subscribedCurrencyBase;return Object(w.jsxs)("div",{className:"currency main",children:[Object(w.jsx)(A,{}),Object(w.jsx)(E,{}),Object(w.jsx)(k,{name:r.name,data:["BTC","ETH","XRP","LTC"],cb:n}),Object(w.jsx)(k,{name:s.name,data:["USD","EUR","JPY","USDT"],cb:c})]})})),U=r(314),F=r(318),J=r(161),R=r(162),H=r(75),Y=r(165),V=r(153),G=r.p+"static/media/logo.6ce24c58.svg",I=function(){return Object(w.jsxs)("div",{className:"nullChart",children:[Object(w.jsx)("span",{children:"The data will appear here"}),Object(w.jsx)("img",{src:G,className:"App-logo",alt:"logo"})]})},K=B((function(e){var t=e.streamer,r=t.historyOfSubsPriceChange,c=t.subscribedCurrency,n=t.subscribedCurrencyBase,s=t.streamBy,a={fontSize:11},i=M(c.name),o=M(n.name),u=Object(b.a)(r),m=u.length<2;return Object(w.jsxs)(w.Fragment,{children:[m&&Object(w.jsx)(I,{}),Object(w.jsxs)(U.a,{width:window.innerWidth-100,height:400,data:m?[]:u,children:[Object(w.jsx)("defs",{children:Object(w.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[Object(w.jsx)("stop",{offset:"5%",stopColor:i,stopOpacity:.8}),Object(w.jsx)("stop",{offset:"95%",stopColor:o,stopOpacity:.1})]})}),Object(w.jsx)(F.a,{strokeDasharray:"3 3"}),Object(w.jsx)(J.a,{dataKey:"time",tick:a}),Object(w.jsx)(R.a,{domain:["dataMin","dataMax"],tick:a}),Object(w.jsx)(H.a,{}),Object(w.jsx)(Y.a,{type:"monotone",name:s,dataKey:"streamBy",stroke:i,fillOpacity:1,fill:"url(#colorUv)"}),Object(w.jsx)(V.a,{x:j()})]})]})})),W=function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{}),Object(w.jsx)(K,{})]})},X=B((function(e){e.streamer.historyOfSubsPriceChange;return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)("div",{className:"App-body",children:Object(w.jsx)(W,{})})})}));i.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(u.a,Object(c.a)(Object(c.a)({},g),{},{children:Object(w.jsx)(X,{})}))}),document.getElementById("root"))},66:function(e){e.exports=JSON.parse('{"BTC":"#ff7300","USD":"#00ff00","EUR":"#294b92","LTC":"#647AE6","ETH":"#000","JPY":"#bd0029","USDT":"#16A17D","XRP":"#9349ff","DEFAULT":"#000"}')}},[[312,1,2]]]);
//# sourceMappingURL=main.e9dcc06a.chunk.js.map